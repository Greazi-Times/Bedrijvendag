import{d as D,j as b,k as x,p as O,c as o,o as l,e as a,A as w,B as E,a as C,F as g,r as m,u as A,w as S,f as p,t as i,m as h,N as L,q as M,H}from"./app-BB1wLqHH.js";import{_ as V}from"./index-fFqgNZJi.js";const I={class:"flex flex-col h-full rounded-xl border border-sidebar-border/70 bg-white p-6 dark:border-sidebar-border dark:bg-gray-800"},G={class:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between"},J={class:"sm:w-1/2"},K=["placeholder"],Q={class:"flex flex-wrap items-center gap-2"},W=["onUpdate:modelValue"],X={value:"all"},Y=["value"],Z={class:"flex-1 mt-4 overflow-x-auto rounded-xl border border-sidebar-border/70"},ee={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},te={class:"bg-gray-50 dark:bg-gray-900"},se=["onClick"],re={key:0},ae={key:0,class:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wide"},oe={class:"divide-y divide-gray-100 dark:divide-gray-800"},le={key:0,class:"px-4 py-3 text-right"},de={class:"relative inline-block text-left"},ie=["onClick"],ne={key:0,class:"absolute right-0 z-10 mt-2 w-36 origin-top-right rounded-md border border-gray-200 bg-white shadow-lg dark:border-gray-700 dark:bg-gray-800"},ue=["onClick"],ce={class:"mt-auto flex flex-wrap items-center justify-between gap-3 border-t border-sidebar-border/70 pt-4"},ve={class:"text-sm text-muted-foreground"},be={class:"flex items-center gap-2"},ge={class:"flex items-center gap-2"},me={class:"text-sm"},ke=D({__name:"Table",props:{title:{},addRoute:{},data:{},columns:{},filters:{},searchPlaceholder:{},addLabel:{},rowActions:{}},emits:["search","filter-change","sort-change"],setup(N,{emit:B}){const u=N,T=B,y=b(""),c=b(5),n=b(1),d=b({key:"",dir:"asc"}),k=b({}),f=b(null),_=x(()=>{let s=[...u.data??[]];if(y.value.trim()){const t=y.value.toLowerCase();s=s.filter(e=>Object.values(e).some(r=>String(r).toLowerCase().includes(t)))}for(const[t,e]of Object.entries(k.value))e!=="all"&&e&&(s=s.filter(r=>{const v=r[t];return Array.isArray(v)?v.includes(e):String(v)===String(e)}));if(d.value.key){const t=d.value.dir==="asc"?1:-1,e=d.value.key;s.sort((r,v)=>{const P=r[e]??"",$=v[e]??"";return P>$?t:P<$?-t:0})}return s}),j=x(()=>Math.max(1,Math.ceil(_.value.length/c.value))),R=x(()=>{const s=(n.value-1)*c.value;return _.value.slice(s,s+c.value)});O([y,k,c],()=>{n.value=1});function U(s){d.value.key===s?d.value.dir=d.value.dir==="asc"?"desc":"asc":d.value={key:s,dir:"asc"},T("sort-change",d.value)}function z(s){f.value=f.value===s?null:s}function F(s,t){f.value=null,M.visit(s.route(t))}function q(){u.addRoute&&M.visit(u.addRoute)}return(s,t)=>(l(),o("div",I,[a("div",G,[a("div",J,[w(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),type:"text",placeholder:s.searchPlaceholder??"Search...",class:"w-full rounded-md border border-sidebar-border/70 bg-white px-3 py-2 text-sm shadow-sm outline-none focus:ring-2 focus:ring-primary/50 dark:border-sidebar-border dark:bg-gray-900"},null,8,K),[[E,y.value]])]),a("div",Q,[(l(!0),o(g,null,m(s.filters,e=>(l(),o("div",{key:e.key},[w(a("select",{"onUpdate:modelValue":r=>k.value[e.key]=r,class:"rounded-md border border-sidebar-border/70 bg-white px-2 py-2 text-sm dark:border-sidebar-border dark:bg-gray-900"},[a("option",X,"All "+i(e.label.toLowerCase()),1),(l(!0),o(g,null,m(e.options,r=>(l(),o("option",{key:r,value:r},i(r),9,Y))),128))],8,W),[[L,k.value[e.key]]])]))),128)),C(A(V),{class:"ml-1",onClick:q},{default:S(()=>[p(i(s.addLabel??"Add"),1)]),_:1})])]),a("div",Z,[a("table",ee,[a("thead",te,[a("tr",null,[(l(!0),o(g,null,m(s.columns,e=>(l(),o("th",{key:e.key,class:"cursor-pointer px-4 py-3 text-left text-xs font-medium uppercase tracking-wide",onClick:r=>U(e.key)},[p(i(e.label)+" ",1),d.value.key===e.key?(l(),o("span",re,i(d.value.dir==="asc"?"↑":"↓"),1)):h("",!0)],8,se))),128)),u.rowActions?(l(),o("th",ae,"Actions")):h("",!0)])]),a("tbody",oe,[(l(!0),o(g,null,m(R.value,e=>(l(),o("tr",{key:e.id,class:"hover:bg-muted/30"},[(l(!0),o(g,null,m(s.columns,r=>(l(),o("td",{key:r.key,class:"px-4 py-3"},[H(s.$slots,r.key,{row:e},()=>[p(i(Array.isArray(e[r.key])?e[r.key].join(", "):e[r.key]),1)])]))),128)),u.rowActions?(l(),o("td",le,[a("div",de,[a("button",{class:"inline-flex w-8 h-8 items-center justify-center rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",onClick:r=>z(e.id)}," ⋮ ",8,ie),f.value===e.id?(l(),o("div",ne,[(l(!0),o(g,null,m(u.rowActions,r=>(l(),o("button",{key:r.label,class:"block w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:v=>F(r,e)},i(r.label),9,ue))),128))])):h("",!0)])])):h("",!0)]))),128))])])]),a("div",ce,[a("div",ve," Total "+i(_.value.length)+" entries ",1),a("div",be,[t[5]||(t[5]=a("label",{class:"text-sm"},"Rows per page:",-1)),w(a("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),class:"rounded-md border border-sidebar-border/70 bg-white px-2 py-1 text-sm dark:border-sidebar-border dark:bg-gray-900"},t[4]||(t[4]=[a("option",{value:5},"5",-1),a("option",{value:10},"10",-1),a("option",{value:15},"15",-1)]),512),[[L,c.value,void 0,{number:!0}]])]),a("div",ge,[C(A(V),{variant:"outline",size:"sm",disabled:n.value===1,onClick:t[2]||(t[2]=e=>n.value--)},{default:S(()=>t[6]||(t[6]=[p("Previous",-1)])),_:1,__:[6]},8,["disabled"]),a("div",me,"Page "+i(n.value)+" / "+i(j.value),1),C(A(V),{variant:"outline",size:"sm",disabled:n.value===j.value,onClick:t[3]||(t[3]=e=>n.value++)},{default:S(()=>t[7]||(t[7]=[p("Next",-1)])),_:1,__:[7]},8,["disabled"])])])]))}});export{ke as _};
